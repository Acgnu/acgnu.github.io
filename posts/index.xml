<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Posts on Acgnu+</title><link>/posts/</link><description>Recent content in Posts on Acgnu+</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Thu, 22 Aug 2024 00:50:44 +0800</lastBuildDate><atom:link href="/posts/index.xml" rel="self" type="application/rss+xml"/><item><title>关于Adobe Flash失效后如何继续使用某弹播放器</title><link>/posts/hack/xtan/flashnext/</link><pubDate>Thu, 22 Aug 2024 00:50:44 +0800</pubDate><guid>/posts/hack/xtan/flashnext/</guid><description>背景 本文再续 某琴吧EXE播放器破解记录, 意在解决Adobe停止维护Flash后, 整个Flash失效导致播放器无法使用的问题.
2020年末Adobe公司停止了对Flash的维护, 随之而来的是浏览器删除了对Flash的支持, 包括Windows系统内安装的Flash也无法继续使用, 而我们获取乐谱资源需要用到Flash版的某琴吧播放器, 之前使用的是AxShockwaveFlash, 这个组件也是引用了Windows上安装的Flash, 只能寻找其他替代方案
此文章编辑于2024年8月, 实际改造在2021年5月就已完成, 因此没有早期Flash失效截图. 另外某琴吧在2023年再次更新, 用手机版APP取代了PC版播放器, 后续的乐谱播放文件变更为.ypn1 (通过前两次规律使用 yp 当前缀, 再加两位数组/字母用脚本穷举得出), 新格式只能在手机上用APP播放. 但暂不影响乐谱页的获取.
目标 使Flash版某琴吧播放器可用
分析 首先简单回顾一下破解过程, 我们先反编译了Flash版的某琴吧播放器, 然后在源码中增加了一个swfExtGetypURL方法, 此方法根据传入的乐谱ID返回乐谱资源URL, 再通过ExternalInterface.addCallback将该方法暴露给Flash容器, 我们就可以使用容器与Flash通信了. 而现在的问题是, 容器即AxShockwaveFlash组件由于Flash停止维护已经用不了了, 那么有没有什么办法能够继续运行Flash呢? 答案是有的, 我们还有另一种独立的Flash Player应用程序, 它不需要安装, 下载到电脑后双击即可运行
Adobe Flash Player 29截图
如上图所示, 启动之后界面是空白的, 因为没有运行Flash文件, 我们可以单击 文件 - 打开, 来选择一个.swf后缀的Flash文件进行播放, 例如下图是来自QQ秀的.swf文件运行效果
image-3
实际上当时下载到的最新版本为Adobe Flash Player 3x, 这些版本也受到了停止维护的影响无法使用, 直到我逐个尝试旧版之后才找到了可用的版本 29
如何传入参数?</description></item><item><title>基于Padavan路由器系统的远程网络唤醒(WOL)工具开发</title><link>/posts/embeded/wol/</link><pubDate>Mon, 06 Mar 2023 00:50:44 +0800</pubDate><guid>/posts/embeded/wol/</guid><description>目录 需求 准备工作 基本思路 编写服务端 编写客户端 测试效果 遇到的问题 需求 由于有时需要远程家里的电脑所以是24小时待机的, 然而大部分时间其实都是用不上的, 后来发现家里电费居高不下跟电脑有很大的关系, 财库已空的我决定设置一套网络唤醒
首先, 需要购买专用的唤醒设备例如网卡, 开关, 支持WOL的路由器之类的就不考虑了, 家里也没有多余的设备, 于是打算给路由器刷第三方系统之后由路由器来唤醒, 我的路由器是小米的AC2100, 刷了Padavan, 刷完后自带两个内网管理插件
DDNS插件: 因为申请不到公网IP, 所以用不了 Zerotier内网穿透插件: 配置后家里的网络连不上Zerotier服务, 查了一下说是被某些运营商屏蔽了(无语), 所以也用不了 虽然可以考虑刷支持其他内网穿透工具的固件, 但不想一个一个试, 且免费的内网穿透稳定性和速率通常都不太行, 最终决定自行编写一个WOL程序放到路由器执行
准备工作 一台支持运行三方程序的路由器, OpenWRT或Padavan等. 在路由器「DHCP」管理页中为需要唤醒的电脑设置固定IP
电脑设置启用网络唤醒. 如何设置网络唤醒? 以我的设备为例:
主板「B460M AORUS ELITE (rev. 1.0) 」默认开启了网络唤醒, 无需修改任何设置.
网卡「Intel(R) Ethernet Connection (12) I219-V」设置如下:
关闭「以太网节能」, 可以解决关机时间过长后无法唤醒的问题, 其他唤醒相关设置均已默认开启, 无需改动
1219v 测试效果.</description></item><item><title>在Windows上使用基于WSL的Ubuntu搭建MIPSEL处理器的C语言交叉编译环境</title><link>/posts/embeded/mipsel/</link><pubDate>Fri, 03 Mar 2023 00:50:44 +0800</pubDate><guid>/posts/embeded/mipsel/</guid><description>目录 硬件准备 Windows上的开发环境准备 使用Ubuntu安装MIPSEL架构的交叉编译器 使用C编写Hello Word!测试 遇到的问题 一点感想 硬件准备 一台基于Linux内核, 采用MIPS处理器的设备, 例如我的小米AC2100, Padavan系统 一台支持Windows子系统(WSL)的Windows 10的电脑 Windows上的开发环境准备 安装Visual Studio 2019.9 或以上版本 添加Linux开发环境工具集 (安装时已勾选的可跳过) 在开始菜单中打开「Visual Studio Installer」 找到Visual Studio 2019, 点击右侧的「修改」按钮 找到「使用C++的Linux开发」, 并勾选保存 开启Windows子系统(WSL)并安装Ubuntu, 如何启用Win10的WSL?
安装好后, 以下可按需修改 修改root密码 设置默认以root启动 修改镜像源 为Visual Studio配置跨平台编译
具体配置方式可参考微软官方教程 如何在Visual Studio 2019中配置WSL交叉编译环境? 如何在Visual Studio 2022中配置WSL交叉编译环境?
需要注意的是, 开始菜单中直接搜索「wsl」可以打开一个命令窗口执行Linux命令, 而打开Ubuntu窗口也可以执行命令, 我是在Ubutnu中安装的编译工具, 因此在Visual Studio的「WSL-GCC-Debug」配置中, 「WSL」一栏需要选「Ubuntu2204」 WSL配置 使用Ubuntu安装MIPSEL交叉编译器 在Ubuntu中执行下列命令</description></item><item><title>某抑云音乐破解简化UI去广告去更新</title><link>/posts/hack/xeasemusic/</link><pubDate>Tue, 09 Nov 2021 00:50:44 +0800</pubDate><guid>/posts/hack/xeasemusic/</guid><description>背景 某抑云音乐随着版本更新, 加入了越来越多的垃圾功能和广告, 严重影响体验, 而且在歌单播放按钮上添加了购买VIP按钮, 不仅比播放按钮大, 还是延迟显示的, 非常容易误按, 就很生气, 于是决定干掉它们
目标 精简某易云UI, 只留下自己需要的部分, 同时各个地方的广告和更新提示
受害者版本 V7.2.10.782837
APP界面概览 image-1
开始破解 直接用反编译工具Jadx, 打开安装包即.apk, 发现软件没有加壳, 可以顺利反编译出源码, 直接按 Ctrl + S 将源码全部保存, 然后导入IDEA, 开始分析代码
虽然没有加壳, 但是经过了混淆, 阅读性非常差, 而且绝大部分字符串都经过了加密, 无法直接搜索, 可以说是非常猥琐了
image-2
1.去除多余标签 首先去除本人用不上的标签页, 只需要留下&amp;quot;我的&amp;quot;标签页就行
image-3
首先全局搜索文字&amp;quot;我的&amp;quot;
image-4
发现能够完全匹配标签栏四组文字的, 在一个arrays.xml文本里, 其中节点的name为ap, 于是搜索R.array.ap
image-5
可以发现一处搜索结果, 位于MainActivity, 应该就是需要找的目标了, 看看这个b方法的实现
image-6
发现此方法只是把xml里的数组保存, 那么我只需要把这个入参的值修改一下, 应该就可以实现去除多余标签的作用了, 编写xposed模块代码如下</description></item><item><title>Stellio Player破解专业版</title><link>/posts/hack/xstellio/</link><pubDate>Fri, 05 Nov 2021 00:50:44 +0800</pubDate><guid>/posts/hack/xstellio/</guid><description>背景 最近发现一直在用的某抑云音乐越来越不行了, 没版权下架歌曲我可以理解, 但下架了也不告诉具体下架了哪些歌曲, 害得我都不知道该怎么找. 更无语的是我自己上传到某易云盘的歌曲都会因为版权问题无法添加到歌单, 而它自身的本地播放功能做的又太垃圾, 于是只能另谋出路, 在Google Play上找到一款本地播放器, 兼顾美观和功能简单实用, 不过免费版有点小广告, 然后试了几款去广告的插件, 都不能完美去除, 而我作为强迫症决定一定要处理掉
目标 去掉各处的广告以及订购按钮
受害者版本 V.6.2.15
APP界面以及广告 image-1
开始破解 打开Jadx, 直接把安装包即.apk文件拖进去, 发现软件没有加壳, 顺利反编译出了播放器源码, 然后直接按 Ctrl + S 将源码全部保存, 然后导入IDEA, 开始分析代码
源码
可以看到虽然源码没有加壳, 但还是有做混淆的, 不过问题不大, 首先通过Android Device Monitor解析一下当前页面的布局
布局
发现主界面中的歌曲列表部分组件的id为content, 于是全局搜索@+id/content
content
发现多处搜索结果, 根据当前APP所在界面以及布局文件命名推测mian_layout应该是其布局文件, 分别看看上面的viewAnim和viewAnimWithoutBackground, 这两个id在当前Android Device Monitor解析的界面中都能找到对应节点, 验证了猜想, 如下图
DDMS
现在要找展示广告的组件了, 通过刚才的搜索结果可以看到, 在main_layout中并没有存在疑似专门用于展示广告的节点, 所以还是很有可能是在运行过程中动态添加的, 于是我们直接搜索main_layout, 找到使用到此布局的MainActivity
搜索Activity</description></item><item><title>三星ONEUI修改记录</title><link>/posts/hack/xrom/oneui/</link><pubDate>Mon, 23 Aug 2021 00:50:44 +0800</pubDate><guid>/posts/hack/xrom/oneui/</guid><description>背景 由于个人喜好, 比较喜欢直角屏的手机, 但市面上的手机放眼望去只有三星Note系列符合我的爱好, 遂购买三星Note 10御用, 然而这手机虽然造型是方方正正的, 但是UI却跟S系列一样到处都是圆角, 这让我很不舒服, 于是有了此文章
目标 将系统UI的圆角修改为直角
三星ONEUI修改前后对比图 image-1
基础知识 再开始之前, 首先需要了解一下基础知识
1. 安卓系统的UI构成
安卓系统的界面呈现都是由内置在系统的APP构成的, 其APP一般位于 /system/app 和 /system/priv-app, 还有一个系统APP引用的公共框架APP, 位于 /system/framework/framework-res.apk, 部分系统例如Flyme在此目录还会有另外一个自己的框架APP, 命名通常以自家OS命名, 此处不作过多介绍, 界面中比较常见的APP如下 framework-res.apk 系统应用引用的界面, 例如提示信息弹窗 SystemUI.apk 系统通知栏界面, 通知弹窗界面 Settings.apk 系统设置界面, OneUI中此APP名称为 SecSettings.apk Messages.apk 短信界面, OneUI中为SamsungMessages_11.apk Gallery.apk 相册界面, OneUI中为SamsungGallery2018.apk Dialer.apk 拨号器,通话记录,联系人界面, OneUI中为SamsungDialer.apk Clock.apk 时钟,闹钟,计时器界面, OneUI中为ClockPackage.apk Finder.apk OneUI启动器(桌面)独有的搜索组件 2. 安卓实现圆角的基本方式
简单的实现安卓圆角可以通过&amp;lt;Shape&amp;gt;来实现, 其中&amp;lt;Corner&amp;gt;节点的属性xxxRadius为关键属性, 例如bottomRightRadius 通常是APP开发者为了减少代码重复率, 会定义一个统一风格而定义的一个统一的资源文件dimens.xml, 所有用到同样值的地方都会引用这个文件, 方便修改和风格统一 开始修改 首先修改framework-res.</description></item><item><title>某加APP破解去除认证和更新</title><link>/posts/hack/xplus/</link><pubDate>Thu, 10 Jun 2021 00:50:44 +0800</pubDate><guid>/posts/hack/xplus/</guid><description>背景 由于某些需要, 进入某大楼的时候必须用他们物业指定的APP刷门禁, 我安装的时候是6.5.0版本, 这会儿启动速度也还可以, 也没太多花里胡哨的功能. 然而没过多久就迎来了一波强制版本更新, 更新后的版本启动速度慢到令人发指, 且增加了商城, 我就怒了, 区区门禁软件竟然这样肆意妄为, 开工!
目标 去除更新检查, 去掉实名认证
某加在7.0.0版本更名为某品, 破解版本为6.5.0, 在此保持称呼其为某加
受害者版本 6.5.0
首页
开始破解 首先尝试使用Android反编译大杀器Jadx, 打开Jadx, 直接把某加安装包即.apk文件拖进去, 发现软件没有加壳, 可以看到Jadx顺利反编译出了某加的源码
7.0版本开始APP加了壳, 没记错的话是某数字安全软件的壳, 脱壳过于麻烦于是使用6.5.0版本破解
JADX-源码
直接按 Ctrl + S 将源码全部保存, 然后导入IDEA, 开始分析代码
禁用强制升级 首先根据弹窗文字&amp;quot;发现新版本&amp;quot;搜索代码
更新弹窗
发现全文匹配的仅有一处, 位于布局文件dialog_check_update.xml
结果1
查找使用该布局文件的地方, 仅有一个类UpdateNoticeDialog
结果2
查看UpdateNoticeDialog的代码, 可以看出这是一个自定义的对话框, 和APP显示的更新弹出框一致
结果3
接着查找使用到了UpdateNoticeDialog类的地方, 发现多处引用
结果4</description></item><item><title>某鱼APP破解去广告</title><link>/posts/hack/xfish/</link><pubDate>Tue, 08 Jun 2021 00:50:44 +0800</pubDate><guid>/posts/hack/xfish/</guid><description>背景 作为一个家徒四壁的打工人, 在某鱼上购买二手的闲置商品便成了我实现梦想的捷径, 但某鱼经过多次升级改版已经相当流氓, 在我搜索出想要的商品的结果页, 嵌入识别度很低的广告, 导致我经常手滑点错, 然后直接跳转启动某宝, 某宝的启动速度又慢的令人发指, 最终还得按下多次返回才能再次回到某鱼的搜索结果页, 忍无可忍的我只能对它做一些不可描述的事了
目标 去除搜索结果页的广告, 同时去掉每次启动就弹窗的恼人的更新提示
受害者版本 6.7.40
某鱼的搜索结果页 某鱼广告
PS:一个屏幕总共就6个展位, 某鱼你这三个广告位良心不会痛吗
开始破解 首先尝试使用Android反编译大杀器Jadx, 打开Jadx, 直接把某鱼安装包即.apk文件拖进去, 发现软件没有加壳, 可以看到Jadx顺利反编译出了某鱼的源码
JADX-源码
直接按 Ctrl + S 将源码全部保存, 然后导入IDEA, 开始分析代码
首先从输入搜索目标后, 点击搜索的按钮开始入手
搜索面板
在代码中查找&amp;quot;搜索&amp;quot;关键字, 发现有多处匹配, 结合搜索面板底下的历史搜索布局, 推测该面板的布局文件应该是search_mid.xml
面板代码
搜索布局文件引用的地方, 发现其在SearchMidActivity中被使用
布局使用
再查看布局文件代码, 搜索按钮的组件ID为search_button, 在SearchMidActivity中查找相关引用
搜索点击1
搜索点击2
可以看出按钮点击后, 首先会调用searchKeyAction, 再经过层层调用最后到达searchNormal, 之后就会通过 gotoResultActivity 跳转到结果页, 继续跟踪gotoResultActivity方法</description></item><item><title>某琴吧EXE播放器破解记录</title><link>/posts/hack/xtan/exe/</link><pubDate>Wed, 26 May 2021 00:50:44 +0800</pubDate><guid>/posts/hack/xtan/exe/</guid><description>背景 本文接另一篇文章 某琴吧Flash播放器破解记录
由于某琴吧改版正式使用exe播放器之后, 删除了所有的.ypa2资源, 导致我没有及时下载的乐谱都无法继续使用Flash播放器播放了, 忍不了, 只能破解exe播放器了
目标 破解该站的exe播放器, 使其能够免费播放VIP乐谱, 且可以完全脱机使用
开始破解 首先安装网站的乐谱播放器, 打开安装目录发现文件结构如下
image-3
其中xxxchrome.exe相当于一个浏览器, 可以访问某琴吧, 点击&amp;quot;客户端播放&amp;quot;按钮即可打开播放器, 如下图
image-2
而xxplayer.exe才是播放器, 播放器启动后, 可以从任务管理器看到新增的进程
image-1
剩下的安装文件和库文件还有配置文件, 就不介绍了.
首先播放一个免费的乐谱, 在任务管理器中查看一下xxplayer.exe的启动参数
image-4
完整的启动参数如下
&amp;quot;C:\Program Files\马赛克music\out1\马赛克player.exe&amp;quot; &amp;quot;file=http://www.马赛克.com/open_yp.php?ypid=73981&amp;amp;uid=999999999&amp;amp;token=fbf0ab24ee47bfa1cb460e41c1f61fdb&amp;amp;ypid=73981&amp;quot; 可以看到启动参数主要为
file 官网的乐谱页地址 ypid 乐谱ID uid 用户ID token 凭证 如果从xxxchrome.exe打开一个VIP乐谱, 则会显示
image-5
那么如果我不用他的xxxchrome.exe, 直接从命令行启动xxplayer.exe, 传入一个VIP乐谱ID, 会发生什么呢?
将刚才的启动参数中的ypid参数修改为一个VIP乐谱ID, 通过命令行
xxplayer.exe &amp;quot;file=http://www.马赛克.com/open_yp.php?ypid=33418&amp;amp;uid=999999999&amp;amp;token=4c6930a47090c3f04c7e9db3bf214078&amp;quot; 启动xxplayer.exe之后如下
image-6</description></item><item><title>某琴吧Flash播放器破解记录</title><link>/posts/hack/xtan/flash/</link><pubDate>Tue, 25 May 2021 00:50:44 +0800</pubDate><guid>/posts/hack/xtan/flash/</guid><description>背景 2019年的某月, 某琴吧将越来越多的谱子改为vip收费谱, 遂于网上寻找Chrome插件实现白嫖.
同年, 得知Adobe公司将于2020年年末彻底停用Flash, 遂产生破解其Flash播放器并本地化的想法.
目标 破解该站的Flash播放器, 使其能够免费下载并播放VIP乐谱, 并将乐谱保存至本地硬盘, 同时使播放器可以脱离浏览器且可以脱机使用
网站乐谱页 image-1
开始破解 首先通过Chrome的调试控制台Network面板, 跟踪进入乐谱页的网络请求如下
进入乐谱页面, 网站向服务端请求 player.swf, 该 .swf 文件即为乐谱播放器 浏览器加载 player.swf , 播放器向服务端请求乐谱的第一页作为预览图, 显示在播放器中 点击播放按钮时, 播放器请求 Sounds.swf, 播放器请求接口 /flash_get_yp_info.php 获取乐谱详细信息, 包括谱名称, 页数, 作者, 余下的乐谱页资源地址, 播放文件地址 播放器下载并载入余下的 .png 格式乐谱图片, 并加载 .ypa2 格式的播放文件, 即可开始播放 由于文章编辑于2021年5月, 该网站已经改版移除了Flash版本播放器, 因此当时调用的服务器接口没有被记录下来, 文章没有该部分请求的截图
基本过程已经明确了, 而所有的请求接口中, 只有第四步的/flash_get_yp_info.php是需要对入参sccode, r1, r2, 进行校验, 那我只需要反编译出播放器的源码, 再根据代码仿写一个凭证生成的算法, 不就可以调用接口并得到资源地址了?
首先要实现下载乐谱图片以及播放文件, 多番对比后选用开源且免费的 jpexs-decompiler, 顺利反编译出player.swf代码, 用IDEA新建为Flex项目打开, 再百度其中的一些package名称, 发现代码可基于 flex_sdk_3.</description></item></channel></rss>